@model  MVC_Team_Git_JooleMay.Models.VMSearch
@{
    ViewBag.Title = "SearchPage";
    Layout = "~/Views/Shared/LoginPage.cshtml";
}
@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    @*<link href="@Url.Content("~/Content/Search.css")" rel="stylesheet" type="text/css" />*@
}

<div @*class="search"*@>
    <div >
        <form action="/action_page.php" class="searchbar">
            @Html.DropDownListFor(m => m.CategoryName, Model.Categories, "Categories")
            <input type="text" name="SearchString" class="form-control" id="searchInput" />
            <input type="submit" value="Filter" />
            <button type="submit" class="btn-info"><i class="fa fa-search"></i></button>
            @*<button data-url='@Html.Action("Detail", "Users", new { id = item.user_id_IN })' id="js-reload-details">@Html.DisplayFor(modelItem => item.DisplayName)</button>*@
        </form>
    </div>
</div>

@*<script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@

@section Scripts {
    @Scripts.Render("~/bundles/jquery")
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script>
   $("#searchInput").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '@Url.Action("GetSearchValue","Search")',
                type: "POST",
                dataType: "json",
                data: { search: request.term},
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.SubCategoryName, value: item.SubCategoryName };
                    }));
                },
                error: function (xhr, status, error) {
                    alert("Error");
                }
            });
        }
    });
    </script>
}

